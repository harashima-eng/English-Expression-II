<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ä»®å®šæ³• å®Œå…¨è§£èª¬ - DUALSCOPE Lesson 12 (UX+)</title>

  <style>
    :root{
      --bg: #0b1020;
      --bg-soft: #111735;
      --card: #ffffff;
      --ink: #0f172a;
      --muted: #64748b;
      --brand: #3b82f6;
      --brand-deep: #1e3a8a;
      --good: #10b981;
      --warn: #f59e0b;
      --violet: #8b5cf6;
      --pink: #ec4899;
      --radius-xl: 20px;
      --radius-lg: 14px;
      --radius-md: 10px;
      --shadow-lg: 0 20px 60px rgba(0,0,0,.25);
      --shadow-md: 0 8px 20px rgba(0,0,0,.12);
      --pad-x: clamp(12px, 2vw, 22px);
      --pad-y: clamp(10px, 1.6vw, 18px);
      --maxw: 1040px;
      --header-h: 92px;
    }

    *{ box-sizing:border-box; margin:0; padding:0; }
    html,body{ height:100%; }

    body{
      font-family: 'Segoe UI','Yu Gothic','Meiryo',system-ui,sans-serif;
      line-height:1.85;
      background: radial-gradient(1100px 700px at 10% -10%, #7c8cf5 0%, transparent 60%),
                  radial-gradient(900px 700px at 120% 10%, #9a6dd7 0%, transparent 55%),
                  linear-gradient(135deg, #0b1020 0%, #0b1020 100%);
      color: var(--ink);
      padding: clamp(8px, 1.6vw, 20px);
    }

    .container{
      max-width: var(--maxw);
      margin: 0 auto;
      background: var(--card);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-lg);
      overflow: clip;
      position: relative;
    }

    /* ===== Header ===== */
    .header{
      position: sticky;
      top: 0;
      z-index: 20;
      background: linear-gradient(135deg, var(--brand-deep) 0%, var(--brand) 95%);
      color: white;
      padding: 18px var(--pad-x);
      border-bottom: 1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(6px);
    }
    .header-inner{
      display:flex;
      gap:14px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .title-wrap h1{
      font-size: clamp(1.35rem, 1.2rem + 1vw, 2.1rem);
      font-weight:800;
      letter-spacing:.02em;
      text-shadow: 0 2px 6px rgba(0,0,0,.25);
    }
    .title-wrap p{ opacity:.95; font-size: .98rem; margin-top:2px; }

    .header-tools{
      display:flex; gap:8px; align-items:center; flex-wrap:wrap;
    }

    .search{
      display:flex; align-items:center; gap:8px;
      background: rgba(255,255,255,.12);
      border:1px solid rgba(255,255,255,.18);
      padding: 6px 10px;
      border-radius: 999px;
    }
    .search input{
      background: transparent;
      border:none; outline:none; color:#fff;
      width: min(55vw, 250px);
      font-size: .95rem;
    }
    .search input::placeholder{ color: rgba(255,255,255,.8); }

    .chip{
      background: rgba(255,255,255,.15);
      border:1px solid rgba(255,255,255,.2);
      color:#fff;
      padding:6px 10px;
      border-radius:999px;
      font-size:.9rem;
      display:inline-flex; gap:6px; align-items:center;
    }

    .btn{
      border:none; cursor:pointer; font-weight:700;
      padding:8px 12px; border-radius:999px;
      background: rgba(255,255,255,.95);
      color:#0f172a;
      box-shadow: 0 4px 12px rgba(0,0,0,.15);
      transition: transform .15s ease, box-shadow .15s ease, opacity .15s ease;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow:0 6px 18px rgba(0,0,0,.2); }
    .btn:active{ transform: translateY(0); opacity:.9; }
    .btn-ghost{
      background: rgba(255,255,255,.12);
      color:#fff;
      border:1px solid rgba(255,255,255,.25);
      box-shadow:none;
    }

    .progress-row{
      margin-top:10px;
      display:flex; align-items:center; gap:10px; flex-wrap:wrap;
      font-size:.9rem;
    }
    .progress-bar{
      flex:1;
      height:8px; background: rgba(255,255,255,.2);
      border-radius:999px; overflow:hidden;
      min-width: 140px;
    }
    .progress-fill{
      height:100%; width:0%;
      background: linear-gradient(90deg, #22c55e, #10b981);
      transition: width .35s ease;
    }

    /* ===== Layout ===== */
    .content{ padding: clamp(14px, 2.2vw, 28px); }

    .section{
      margin-bottom: 44px;
      border-left: 5px solid var(--brand);
      padding-left: 16px;
    }
    .section-title{
      font-size: clamp(1.2rem, 1.05rem + .8vw, 1.7rem);
      color: var(--brand-deep);
      margin-bottom: 12px;
      font-weight: 800;
      display:flex; align-items:center; gap:8px;
    }
    .section-desc{
      color: var(--muted);
      margin-bottom: 14px;
      font-size: .98rem;
    }

    /* ===== Question Cards ===== */
    .question-block{
      background: #f8fafc;
      border-radius: var(--radius-lg);
      padding: 18px 18px;
      margin: 14px 0 18px;
      border: 1.5px solid #e2e8f0;
      transition: border-color .2s ease, box-shadow .2s ease, transform .2s ease;
      position: relative;
      scroll-margin-top: calc(var(--header-h) + 16px);
    }
    .question-block:hover{
      border-color: var(--brand);
      box-shadow: var(--shadow-md);
      transform: translateY(-1px);
    }
    .question-block.answered{
      border-color: var(--good);
      background: #f0fdf4;
    }

    .question-number{
      background: var(--brand);
      color: white;
      padding: 6px 12px;
      border-radius: 9px;
      display: inline-block;
      font-weight: 800;
      font-size: 1rem;
      margin-bottom: 10px;
    }
    .question-text{
      font-size: 1.08rem;
      margin-bottom: 10px;
      color: #111827;
      font-weight: 600;
      line-height: 1.9;
    }

    .choices{ margin: 8px 0; padding-left: 18px; }
    .choice-item{
      margin: 6px 0;
      font-size: 1rem;
      padding: 4px 0;
    }

    .button-group{
      display:flex; gap:8px; flex-wrap:wrap; margin-top: 8px;
    }
    .hint-button, .answer-button{
      border:none; cursor:pointer; font-weight:800;
      padding: 10px 14px;
      border-radius: 10px;
      font-size: .98rem;
      display:inline-flex; gap:8px; align-items:center;
      transition: transform .15s ease, box-shadow .15s ease, opacity .15s ease;
    }
    .hint-button{
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
      color:white; box-shadow:0 4px 12px rgba(245,158,11,.3);
    }
    .answer-button{
      background: linear-gradient(135deg, #10b981 0%, #059669 100%);
      color:white; box-shadow:0 4px 12px rgba(16,185,129,.3);
    }
    .hint-button:hover, .answer-button:hover{
      transform: translateY(-1px);
      box-shadow:0 6px 16px rgba(0,0,0,.18);
    }
    .hint-button:active, .answer-button:active{ transform: translateY(0); opacity:.92; }

    .hint-box, .explanation{
      display:none;
      margin-top: 12px;
      padding: 14px 14px;
      border-radius: var(--radius-md);
      animation: slideDown .22s ease;
    }
    .hint-box.show{ display:block; }
    .explanation.show{ display:block; }

    .hint-box{
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border-left: 5px solid var(--warn);
    }
    .hint-title{
      color: #92400e; font-weight: 900; font-size:1.05rem;
      margin-bottom:6px; display:flex; gap:8px; align-items:center;
    }
    .hint-content{ color:#78350f; }

    .explanation{
      background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%);
      border-left: 5px solid var(--violet);
    }

    @keyframes slideDown{
      from{ opacity:0; transform:translateY(-6px); }
      to{ opacity:1; transform:translateY(0); }
    }

    .correct-answer{
      background:#d1fae5;
      padding:10px 12px;
      border-radius:8px;
      margin-bottom:8px;
      border-left:4px solid var(--good);
      font-weight:800;
    }
    .correct-mark{ color:#059669; font-weight:900; font-size:1.2em; margin-right:6px; }

    .grammar-point{
      background:#ede9fe;
      padding:10px 12px;
      border-radius:8px;
      margin:8px 0;
      border-left:4px solid var(--violet);
    }
    .grammar-title{ color:#6d28d9; font-weight:900; margin-bottom:4px; }

    .example{
      background:#dbeafe;
      padding:9px 10px;
      border-radius:6px;
      margin:8px 0;
      font-style: italic;
      border-left:3px solid var(--brand);
    }

    .translation{
      color: #475569;
      margin-top: 8px;
      font-size: .96rem;
      padding: 8px 10px;
      background: #f1f5f9;
      border-radius: 6px;
    }

    .vocab-hint{
      background:#fce7f3;
      padding:9px 10px;
      border-radius:6px;
      margin:8px 0;
      border-left:3px solid var(--pink);
    }
    .vocab-title{ color:#be185d; font-weight:900; margin-bottom:3px; }

    .fill-blank{
      display:inline-block;
      min-width: 90px;
      border-bottom: 2px solid var(--brand);
      margin:0 4px;
      padding:0 6px;
      font-weight:800;
      color: var(--brand);
      text-align:center;
    }

    /* ===== Mini Nav (floating) ===== */
    .mini-nav{
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 18px;
      z-index: 30;
      background: rgba(255,255,255,.95);
      border: 1px solid #e5e7eb;
      box-shadow: var(--shadow-md);
      border-radius: 999px;
      padding: 6px 8px;
      display:flex; gap:6px; align-items:center;
      backdrop-filter: blur(8px);
    }
    .mini-nav .nav-btn{
      border:none; cursor:pointer; font-weight:800;
      padding:8px 10px; border-radius:999px;
      background:#0f172a; color:#fff;
      transition: transform .12s ease, opacity .12s ease;
      font-size:.9rem;
    }
    .mini-nav .nav-btn:hover{ transform: translateY(-1px); opacity:.95; }
    .mini-nav .nav-btn.ghost{
      background:#fff; color:#0f172a; border:1px solid #e5e7eb;
    }

    /* ===== Dark mode ===== */
    body.dark-mode{
      background: radial-gradient(1100px 700px at 10% -10%, #23307b 0%, transparent 60%),
                  radial-gradient(900px 700px at 120% 10%, #3d1d7a 0%, transparent 55%),
                  linear-gradient(135deg, #070b16 0%, #070b16 100%);
      color:#e5e7eb;
    }
    body.dark-mode .container{ background:#0f172a; color:#e5e7eb; }
    body.dark-mode .question-block{
      background:#0b1224; border-color:#24304a;
    }
    body.dark-mode .question-block.answered{
      background:#052e2a; border-color: var(--good);
    }
    body.dark-mode .question-text{ color:#e5e7eb; }
    body.dark-mode .section-title{ color:#93c5fd; }
    body.dark-mode .section-desc{ color:#a1a1aa; }

    body.dark-mode .hint-box{
      background: linear-gradient(135deg, #3b2f05 0%, #6b4f07 100%);
      color:#fef3c7;
    }
    body.dark-mode .hint-title{ color:#fde68a; }
    body.dark-mode .hint-content{ color:#fef3c7; }

    body.dark-mode .explanation{
      background: linear-gradient(135deg, #1f1147 0%, #2b1760 100%);
      color:#ede9fe;
    }

    body.dark-mode .translation{
      background:#0f172a; color:#cbd5e1;
      border:1px solid #1f2937;
    }
    body.dark-mode .vocab-hint{
      background:#2a0d21; color:#fbcfe8;
    }
    body.dark-mode .example{
      background:#0b2a52; color:#dbeafe;
    }

    /* prefers-reduced-motion */
    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; scroll-behavior:auto !important; }
    }

    @media (max-width: 768px){
      .choices{ padding-left: 10px; }
      .button-group{ flex-direction: column; }
      .hint-button,.answer-button{ width:100%; justify-content:center; }
      .mini-nav{ width:calc(100% - 20px); justify-content:space-between; }
    }
  </style>
</head>

<body>
  <div class="container" id="top">
    <!-- Sticky Header -->
    <header class="header">
      <div class="header-inner">
        <div class="title-wrap">
          <h1>ğŸ¯ ä»®å®šæ³• å®Œå…¨è§£èª¬</h1>
          <p>DUALSCOPE Lesson 12 - Subjunctive Mood / å…¨å•é¡Œå®Œå…¨ç‰ˆ ğŸ“š</p>
        </div>

        <div class="header-tools">
          <label class="search" aria-label="search questions">
            ğŸ”
            <input id="searchInput" type="search" placeholder="å•é¡Œã‚’æ¤œç´¢ (ex. wish / were / Q3)" />
          </label>
          <div class="chip" id="progressText">é€²æ—: 0 / 0</div>
          <button class="btn btn-ghost" id="toggleAllHints">ğŸ’¡ ãƒ’ãƒ³ãƒˆä¸€æ‹¬</button>
          <button class="btn btn-ghost" id="toggleAllAnswers">âœ“ è§£ç­”ä¸€æ‹¬</button>
          <button class="btn" id="downloadBtn">â¬‡ï¸ Download HTML</button>
          <button class="btn btn-ghost" id="darkToggle">ğŸŒ™</button>
        </div>
      </div>

      <div class="progress-row">
        <div class="progress-bar" aria-label="progress bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div style="opacity:.9;">è§£ç­”ã‚’é–‹ãã¨é€²æ—ãŒä¸ŠãŒã‚‹ä»•æ§˜</div>
      </div>
    </header>

    <main class="content" id="contentRoot">

      <!-- =========================
           YOUR ORIGINAL CONTENT
           (unchanged, just removed inline onclick)
           ========================= -->

      <!-- åŸºæœ¬å•é¡Œ Section 1 -->
      <section class="section" data-section="basic1">
        <h2 class="section-title">ğŸ“ åŸºæœ¬å•é¡Œ - Part 1</h2>
        <p class="section-desc">å„æ–‡ã®( )å†…ã®èªå¥ã®ã†ã¡ã€ã‚ˆã‚Šé©å½“ãªã»ã†ã‚’é¸ã³ãªã•ã„ã€‚</p>

        <!-- Question 1-1 -->
        <div class="question-block" data-question="q1-1">
          <div class="question-number">å•é¡Œ (1)</div>
          <div class="question-text">
            If she ( had, had had ) enough time, she could read a long novel.
          </div>
          <div class="choices">
            <div class="choice-item">a. had</div>
            <div class="choice-item">b. had had</div>
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q1-1">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q1-1">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q1-1" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ ä¸»ç¯€ã®å‹•è© <strong>could read</strong> ã«æ³¨ç›®ã—ã‚ˆã†</p>
              <p>â€¢ <code>åŠ©å‹•è©ã®éå»å½¢ + å‹•è©ã®åŸå½¢</code> = ä»®å®šæ³•éå»</p>
              <p>â€¢ ä»®å®šæ³•éå»ã®ifç¯€ã¯ <strong>éå»å½¢</strong> ã‚’ä½¿ã„ã¾ã™</p>
            </div>
          </div>
          <div id="q1-1" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: a. had</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: ä»®å®šæ³•éå»</div>
              <p><strong>ã€Œã‚‚ã—(ä»Š)ï½ãªã‚‰â€¦ã ã‚ã†ã«ã€</strong></p>
              <p>ä¸»ç¯€ã®å‹•è©ãŒ <code>åŠ©å‹•è©ã®éå»å½¢ + å‹•è©ã®åŸå½¢</code> (could read) ãªã®ã§ã€ifç¯€ã®å‹•è©ã¯<strong>éå»å½¢</strong>ã‚’ä½¿ã„ã¾ã™ã€‚</p>
              <p>ç¾åœ¨ã®äº‹å®Ÿã«åã™ã‚‹ã“ã¨ã‚’ä»®å®šã™ã‚‹ = <strong>ä»®å®šæ³•éå»</strong></p>
            </div>
            <div class="translation"><strong>å’Œè¨³:</strong> ã‚‚ã—å½¼å¥³ã«ååˆ†ãªæ™‚é–“ãŒã‚ã‚Œã°ã€é•·ç·¨å°èª¬ã‚’èª­ã‚ã‚‹ã®ã«ã€‚</div>
            <div class="vocab-hint">
              <div class="vocab-title">ğŸ’¡ é‡è¦å˜èª</div>
              <p><strong>enough time</strong> = ååˆ†ãªæ™‚é–“</p>
              <p><strong>long novel</strong> = é•·ç·¨å°èª¬</p>
            </div>
            <div class="example">
              <strong>ä»®å®šæ³•éå»ã®å½¢:</strong><br>
              If + S + å‹•è©ã®éå»å½¢, S + åŠ©å‹•è©ã®éå»å½¢ + å‹•è©ã®åŸå½¢
            </div>
          </div>
        </div>

        <!-- Question 1-2 -->
        <div class="question-block" data-question="q1-2">
          <div class="question-number">å•é¡Œ (2)</div>
          <div class="question-text">
            I wish I ( studied, had studied ) harder last night.
          </div>
          <div class="choices">
            <div class="choice-item">a. studied</div>
            <div class="choice-item">b. had studied</div>
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q1-2">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q1-2">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q1-2" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ <strong>last night</strong> (æ˜¨å¤œ) ã¨ã„ã†æ™‚é–“è¡¨ç¾ã«æ³¨ç›®</p>
              <p>â€¢ éå»ã®ã“ã¨ã¸ã®å¾Œæ‚” = ä»®å®šæ³•éå»å®Œäº†</p>
              <p>â€¢ I wish + éå»å®Œäº†å½¢ = ã€Œï½ã ã£ãŸã‚‰ã‚ˆã‹ã£ãŸã®ã«ã€</p>
            </div>
          </div>
          <div id="q1-2" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: b. had studied</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: wish + ä»®å®šæ³•éå»å®Œäº†</div>
              <p><strong>ã€Œ(ã‚ã®ã¨ã)ï½ã ã£ãŸã‚‰ã‚ˆã‹ã£ãŸã®ã«ã€</strong></p>
              <p><strong>last night</strong> ã¨ã„ã†éå»ã®æ™‚ç‚¹ã«æ³¨ç›®!</p>
              <p>éå»ã®äº‹å®Ÿã¨ç•°ãªã‚‹é¡˜æœ› = <strong>I wish + ä»®å®šæ³•éå»å®Œäº†</strong></p>
            </div>
            <div class="translation"><strong>å’Œè¨³:</strong> æ˜¨å¤œã‚‚ã£ã¨ä¸€ç”Ÿæ‡¸å‘½å‹‰å¼·ã—ã¦ã„ãŸã‚‰ã‚ˆã‹ã£ãŸã®ã«ã€‚</div>
            <div class="vocab-hint">
              <div class="vocab-title">ğŸ’¡ é‡è¦å˜èª</div>
              <p><strong>harder</strong> = ã‚‚ã£ã¨ä¸€ç”Ÿæ‡¸å‘½ã«</p>
              <p><strong>last night</strong> = æ˜¨å¤œ</p>
            </div>
            <div class="example">
              <strong>wishã®ä½¿ã„åˆ†ã‘:</strong><br>
              â€¢ I wish + éå»å½¢ â†’ ä»Šã®ã“ã¨ã¸ã®é¡˜æœ›<br>
              â€¢ I wish + éå»å®Œäº†å½¢ â†’ éå»ã®ã“ã¨ã¸ã®å¾Œæ‚”
            </div>
          </div>
        </div>

        <!-- Question 1-3 -->
        <div class="question-block" data-question="q1-3">
          <div class="question-number">å•é¡Œ (3)</div>
          <div class="question-text">
            If it ( were not, had not been ) for music, life would be boring.
          </div>
          <div class="choices">
            <div class="choice-item">a. were not</div>
            <div class="choice-item">b. had not been</div>
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q1-3">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q1-3">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q1-3" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ ä¸»ç¯€ã® <strong>would be</strong> ã«æ³¨ç›®</p>
              <p>â€¢ would + å‹•è©ã®åŸå½¢ = ä»®å®šæ³•éå»</p>
              <p>â€¢ If it were not for ~ = ã€Œï½ãŒãªã‘ã‚Œã°ã€(ç¾åœ¨)</p>
            </div>
          </div>
          <div id="q1-3" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: a. were not</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: If it were not for ~</div>
              <p><strong>ã€Œ(ä»Š)ï½ãŒãªã‘ã‚Œã°ã€</strong></p>
              <p>ä¸»ç¯€ãŒ <code>would + å‹•è©ã®åŸå½¢</code> (would be) ãªã®ã§ã€<strong>ä»®å®šæ³•éå»</strong>ã®æ–‡ã§ã™ã€‚</p>
              <p>æ…£ç”¨è¡¨ç¾: <strong>If it were not for ~</strong> = ã€Œï½ãŒãªã‘ã‚Œã°ã€</p>
            </div>
            <div class="translation"><strong>å’Œè¨³:</strong> ã‚‚ã—éŸ³æ¥½ãŒãªã‘ã‚Œã°ã€äººç”Ÿã¯é€€å±ˆã ã‚ã†ã«ã€‚</div>
            <div class="vocab-hint">
              <div class="vocab-title">ğŸ’¡ é‡è¦å˜èª</div>
              <p><strong>boring</strong> = é€€å±ˆãª</p>
            </div>
            <div class="example">
              <strong>è¦šãˆã¦ãŠã“ã†:</strong><br>
              â€¢ If it were not for ~ â†’ ç¾åœ¨<br>
              â€¢ If it had not been for ~ â†’ éå»
            </div>
          </div>
        </div>

        <!-- Question 1-4 -->
        <div class="question-block" data-question="q1-4">
          <div class="question-number">å•é¡Œ (4)</div>
          <div class="question-text">
            If I had had another week until the deadline, I ( could write, could have written ) a better essay.
          </div>
          <div class="choices">
            <div class="choice-item">a. could write</div>
            <div class="choice-item">b. could have written</div>
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q1-4">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q1-4">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q1-4" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ ifç¯€ãŒ <strong>had had</strong> (éå»å®Œäº†å½¢)</p>
              <p>â€¢ ä¸»ç¯€ã‚‚éå»å®Œäº†å½¢ã«å¯¾å¿œã•ã›ã‚‹å¿…è¦ãŒã‚ã‚‹</p>
              <p>â€¢ åŠ©å‹•è©ã®éå»å½¢ + have + éå»åˆ†è©</p>
            </div>
          </div>
          <div id="q1-4" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: b. could have written</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: ä»®å®šæ³•éå»å®Œäº†</div>
              <p><strong>ã€Œã‚‚ã—(ã‚ã®ã¨ã)ï½ã ã£ãŸãªã‚‰â€¦ã ã£ãŸã ã‚ã†ã«ã€</strong></p>
              <p>ifç¯€ãŒ <code>had + éå»åˆ†è©</code> (had had) ãªã®ã§ã€ä¸»ç¯€ã‚‚éå»å®Œäº†å½¢ã«å¯¾å¿œã•ã›ã¾ã™ã€‚</p>
              <p>ä¸»ç¯€: <strong>åŠ©å‹•è©ã®éå»å½¢ + have + éå»åˆ†è©</strong></p>
            </div>
            <div class="translation"><strong>å’Œè¨³:</strong> ã‚‚ã—ç· åˆ‡ã¾ã§ã«ã‚‚ã†1é€±é–“ã‚ã£ãŸã‚‰ã€ã‚‚ã£ã¨ã‚ˆã„è«–æ–‡ãŒæ›¸ã‘ãŸã ã‚ã†ã«ã€‚</div>
            <div class="vocab-hint">
              <div class="vocab-title">ğŸ’¡ é‡è¦å˜èª</div>
              <p><strong>deadline</strong> = ç· åˆ‡</p>
              <p><strong>essay</strong> = è«–æ–‡ã€ã‚¨ãƒƒã‚»ã‚¤</p>
            </div>
          </div>
        </div>

        <!-- Question 1-5 -->
        <div class="question-block" data-question="q1-5">
          <div class="question-number">å•é¡Œ (5)</div>
          <div class="question-text">
            She loves him as if he ( were, had been ) her own child.
          </div>
          <div class="choices">
            <div class="choice-item">a. were</div>
            <div class="choice-item">b. had been</div>
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q1-5">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q1-5">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q1-5" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ ä¸»ç¯€ã®å‹•è© <strong>loves</strong> (ç¾åœ¨å½¢) ã«æ³¨ç›®</p>
              <p>â€¢ ä¸»ç¯€ã¨åŒæ™‚ã®å†…å®¹ = ä»®å®šæ³•éå»</p>
              <p>â€¢ as if + éå»å½¢ = ã€Œã¾ã‚‹ã§ï½ã§ã‚ã‚‹ã‹ã®ã‚ˆã†ã«ã€</p>
            </div>
          </div>
          <div id="q1-5" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: a. were</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: as if + ä»®å®šæ³•éå»</div>
              <p><strong>ã€Œ(ã¾ã‚‹ã§)ï½ã§ã‚ã‚‹ã‹ã®ã‚ˆã†ã«ã€</strong></p>
              <p>ä¸»ç¯€ã®å‹•è© <strong>loves</strong> (ç¾åœ¨å½¢) ã¨<strong>åŒæ™‚</strong>ã®å†…å®¹ã‚’è¡¨ã™ã®ã§ã€ä»®å®šæ³•éå»ã‚’ä½¿ã„ã¾ã™ã€‚</p>
            </div>
            <div class="translation"><strong>å’Œè¨³:</strong> å½¼å¥³ã¯å½¼ãŒã¾ã‚‹ã§è‡ªåˆ†ã®å­ã©ã‚‚ã§ã‚ã‚‹ã‹ã®ã‚ˆã†ã«å½¼ã‚’æ„›ã—ã¦ã„ã‚‹ã€‚</div>
            <div class="vocab-hint"><div class="vocab-title">ğŸ’¡ é‡è¦å˜èª</div><p><strong>her own child</strong> = å½¼å¥³è‡ªèº«ã®å­ã©ã‚‚</p></div>
            <div class="example">
              <strong>as ifã®ä½¿ã„åˆ†ã‘:</strong><br>
              â€¢ as if + éå»å½¢ â†’ ä¸»ç¯€ã¨åŒæ™‚<br>
              â€¢ as if + éå»å®Œäº†å½¢ â†’ ä¸»ç¯€ã‚ˆã‚Šå‰
            </div>
          </div>
        </div>

        <!-- Question 1-6 -->
        <div class="question-block" data-question="q1-6">
          <div class="question-number">å•é¡Œ (6)</div>
          <div class="question-text">
            If you ( should, were to ) find any mistakes, please let me know.
          </div>
          <div class="choices">
            <div class="choice-item">a. should</div>
            <div class="choice-item">b. were to</div>
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q1-6">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q1-6">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q1-6" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ ä¸»ç¯€ãŒ <strong>å‘½ä»¤æ–‡</strong> (please let me know)</p>
              <p>â€¢ If S should ~ = å‘½ä»¤æ–‡ã¨ä¸€ç·’ã«ä½¿ãˆã‚‹</p>
              <p>â€¢ If S were to ~ = å‘½ä»¤æ–‡ã¨ä¸€ç·’ã«ã¯ä½¿ãˆãªã„</p>
            </div>
          </div>
          <div id="q1-6" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: a. should</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: If S should ~</div>
              <p><strong>ã€Œä¸‡ä¸€ï½ã—ãŸã‚‰ã€</strong></p>
              <p>æœªæ¥ã®ã“ã¨ã‚’ä»®å®šã™ã‚‹è¡¨ç¾ã§ã™ãŒã€ä¸»ç¯€ãŒ<strong>å‘½ä»¤æ–‡</strong>ã®å ´åˆã¯ <strong>If S should ~</strong> ã‚’ä½¿ã„ã¾ã™ã€‚</p>
              <p><strong>If S were to ~</strong> ã¯å‘½ä»¤æ–‡ã¨ä¸€ç·’ã«ã¯ä½¿ãˆã¾ã›ã‚“!</p>
            </div>
            <div class="translation"><strong>å’Œè¨³:</strong> ä¸‡ä¸€é–“é•ã„ã‚’è¦‹ã¤ã‘ãŸã‚‰ã€ç§ã«çŸ¥ã‚‰ã›ã¦ãã ã•ã„ã€‚</div>
            <div class="vocab-hint">
              <div class="vocab-title">ğŸ’¡ é‡è¦è¡¨ç¾</div>
              <p><strong>let me know</strong> = ç§ã«çŸ¥ã‚‰ã›ã‚‹</p>
              <p><strong>find mistakes</strong> = é–“é•ã„ã‚’è¦‹ã¤ã‘ã‚‹</p>
            </div>
            <div class="example">
              <strong>æœªæ¥ã®ä»®å®š:</strong><br>
              â€¢ If S should ~ â†’ ä¸»ç¯€ã¯å‘½ä»¤æ–‡OK<br>
              â€¢ If S were to ~ â†’ ä¸»ç¯€ã¯å‘½ä»¤æ–‡NG
            </div>
          </div>
        </div>

        <!-- Question 1-7 -->
        <div class="question-block" data-question="q1-7">
          <div class="question-number">å•é¡Œ (7)</div>
          <div class="question-text">
            If I had caught the bus, I ( would be, would have been ) there now.
          </div>
          <div class="choices">
            <div class="choice-item">a. would be</div>
            <div class="choice-item">b. would have been</div>
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q1-7">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q1-7">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q1-7" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ ä¸»ç¯€ã® <strong>now</strong> ã«æ³¨ç›®!</p>
              <p>â€¢ ifç¯€ = éå»ã®ä»®å®š (had caught)</p>
              <p>â€¢ ä¸»ç¯€ = ç¾åœ¨ã®ä»®å®š (now)</p>
              <p>â€¢ ã“ã‚Œã¯ä»®å®šæ³•ã®æ··åˆå‹ã§ã™</p>
            </div>
          </div>
          <div id="q1-7" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: a. would be</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: ä»®å®šæ³•ã®æ··åˆå‹</div>
              <p><strong>ã€Œã‚ã®ã¨ãï½ã ã£ãŸã‚‰ã€ä»Šâ€¦ãªã®ã«ã€</strong></p>
              <p>â€¢ ifç¯€ = ä»®å®šæ³•éå»å®Œäº† (éå»ã®ä»®å®š)</p>
              <p>â€¢ ä¸»ç¯€ = ä»®å®šæ³•éå» (ç¾åœ¨ã®ä»®å®š)</p>
            </div>
            <div class="translation"><strong>å’Œè¨³:</strong> ã‚‚ã—ãã®ãƒã‚¹ã«é–“ã«åˆã£ã¦ã„ãŸã‚‰ã€ç§ã¯ä»Šã”ã‚ãã“ã«ã„ã‚‹ã®ã«ã€‚</div>
            <div class="vocab-hint">
              <div class="vocab-title">ğŸ’¡ é‡è¦å˜èª</div>
              <p><strong>catch the bus</strong> = ãƒã‚¹ã«é–“ã«åˆã†</p>
              <p><strong>now</strong> = ä»Š</p>
            </div>
            <div class="example">
              <strong>æ··åˆå‹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³:</strong><br>
              If + éå»å®Œäº†, S + would/could + å‹•è©ã®åŸå½¢ (+ now)
            </div>
          </div>
        </div>
      </section>

      <!-- ==== from here on, your remaining sections are kept as-is ====
           I only swapped the buttons to data-action/data-target.
           (Everything below is your text.)
      -->

      <!-- åŸºæœ¬å•é¡Œ Section 2 -->
      <section class="section" data-section="basic2">
        <h2 class="section-title">ğŸ“ åŸºæœ¬å•é¡Œ - Part 2</h2>
        <p class="section-desc">æ—¥æœ¬æ–‡ã®æ„å‘³ã«åˆã†ã‚ˆã†ã«( )ã«é©å½“ãªèªã‚’å…¥ã‚Œãªã•ã„ã€‚</p>

        <div class="question-block" data-question="q2-1">
          <div class="question-number">å•é¡Œ (1)</div>
          <div class="question-text">
            ãƒãƒªãƒ¼ã¯ä½•äº‹ã‚‚èµ·ã“ã‚‰ãªã‹ã£ãŸã‚ˆã†ã«ãµã‚‹ã¾ã£ãŸã€‚<br>
            Harry behaved as if nothing (<span class="fill-blank">ã€€ã€€ã€€</span>) (<span class="fill-blank">ã€€ã€€ã€€</span>).
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q2-1">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q2-1">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q2-1" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ ä¸»ç¯€ã®å‹•è© <strong>behaved</strong> (éå») ã«æ³¨ç›®</p>
              <p>â€¢ ã€Œä½•äº‹ã‚‚èµ·ã“ã‚‰ãªã‹ã£ãŸã€= behaved ã‚ˆã‚Šå‰</p>
              <p>â€¢ as if + éå»å®Œäº†å½¢ã‚’ä½¿ã†</p>
            </div>
          </div>
          <div id="q2-1" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: had happened</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: as if + ä»®å®šæ³•éå»å®Œäº†</div>
              <p>ä¸»ç¯€ã®å‹•è© <strong>behaved</strong> (éå») ã‚ˆã‚Š<strong>ä»¥å‰</strong>ã®å†…å®¹ã‚’è¡¨ã™ã®ã§ã€ä»®å®šæ³•éå»å®Œäº†ã‚’ä½¿ã„ã¾ã™ã€‚</p>
              <p>å½¢: <strong>as if + S + had + éå»åˆ†è©</strong></p>
            </div>
            <div class="translation"><strong>å’Œè¨³:</strong> ãƒãƒªãƒ¼ã¯ä½•äº‹ã‚‚èµ·ã“ã‚‰ãªã‹ã£ãŸã‚ˆã†ã«ãµã‚‹ã¾ã£ãŸã€‚</div>
            <div class="vocab-hint">
              <div class="vocab-title">ğŸ’¡ é‡è¦å˜èª</div>
              <p><strong>behave</strong> = ãµã‚‹ã¾ã†</p>
              <p><strong>happen</strong> = èµ·ã“ã‚‹</p>
            </div>
          </div>
        </div>

        <div class="question-block" data-question="q2-2">
          <div class="question-number">å•é¡Œ (2)</div>
          <div class="question-text">
            ç§ãŒå½¼ã®ç«‹å ´ã ã£ãŸã‚‰ã€å‹•æºã—ã¦ã„ãŸã ã‚ã†ã€‚<br>
            (<span class="fill-blank">ã€€ã€€ã€€</span>) (<span class="fill-blank">ã€€ã€€ã€€</span>) (<span class="fill-blank">ã€€ã€€ã€€</span>), I would have been upset.
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q2-2">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q2-2">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q2-2" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ ã€Œå½¼ã®ç«‹å ´ã ã£ãŸã‚‰ã€= ifç¯€ã®ä»£ç”¨è¡¨ç¾</p>
              <p>â€¢ In A's place = ã€ŒAã®ç«‹å ´ã§ã€</p>
              <p>â€¢ ä¸»ç¯€ãŒä»®å®šæ³•éå»å®Œäº†ãªã®ã§ã€éå»ã®ã“ã¨</p>
            </div>
          </div>
          <div id="q2-2" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: In his place</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: ifç¯€ã®ä»£ç”¨è¡¨ç¾</div>
              <p><strong>In A's place = ã€ŒAã®ç«‹å ´ã ã£ãŸã‚‰ã€</strong></p>
              <p>In his place = If I had been in his place</p>
            </div>
            <div class="translation"><strong>å’Œè¨³:</strong> ç§ãŒå½¼ã®ç«‹å ´ã ã£ãŸã‚‰ã€å‹•æºã—ã¦ã„ãŸã ã‚ã†ã€‚</div>
            <div class="vocab-hint">
              <div class="vocab-title">ğŸ’¡ é‡è¦å˜èª</div>
              <p><strong>upset</strong> = å‹•æºã—ãŸ</p>
              <p><strong>in one's place</strong> = ï½ã®ç«‹å ´ã§</p>
            </div>
            <div class="example">
              <strong>åŒã˜æ„å‘³ã®è¡¨ç¾:</strong><br>
              â€¢ In his place / In his position / In his shoes
            </div>
          </div>
        </div>

        <div class="question-block" data-question="q2-3">
          <div class="question-number">å•é¡Œ (3)</div>
          <div class="question-text">
            ã‚ãªãŸã¯å°†æ¥ã®ã“ã¨ã‚’è€ƒãˆã¦ã‚‚ã„ã„ã“ã‚ã ã€‚<br>
            (<span class="fill-blank">ã€€ã€€ã€€</span>) (<span class="fill-blank">ã€€ã€€ã€€</span>) time you (<span class="fill-blank">ã€€ã€€ã€€</span>) thinking about your future.
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q2-3">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q2-3">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q2-3" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ ã€Œï½ã—ã¦ã‚‚ã„ã„ã“ã‚ã ã€= It is time ~</p>
              <p>â€¢ It is time + ä»®å®šæ³•éå»</p>
              <p>â€¢ å‹•è©ã¯éå»å½¢ã‚’ä½¿ã†</p>
            </div>
          </div>
          <div id="q2-3" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: It is, started[began]</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: It is time + ä»®å®šæ³•éå»</div>
              <p>å½¢: <strong>It is (high/about) time (that) + S + éå»å½¢</strong></p>
            </div>
            <div class="translation"><strong>å’Œè¨³:</strong> ã‚ãªãŸã¯å°†æ¥ã®ã“ã¨ã‚’è€ƒãˆã¦ã‚‚ã„ã„ã“ã‚ã ã€‚</div>
          </div>
        </div>

        <div class="question-block" data-question="q2-4">
          <div class="question-number">å•é¡Œ (4)</div>
          <div class="question-text">
            ã‚‚ã—åœ°çƒãŒå¤ªé™½ã®å‘¨ã‚Šã‚’å›ã‚‹ã®ã‚’ã‚„ã‚ã‚‹ã¨ã€ä½•ãŒèµ·ãã‚‹ã ã‚ã†ã‹ã€‚<br>
            What would happen if the earth (<span class="fill-blank">ã€€ã€€ã€€</span>) (<span class="fill-blank">ã€€ã€€ã€€</span>) stop spinning around the sun?
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q2-4">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q2-4">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q2-4" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ æœªæ¥ã®ä»®å®šã‚’è¡¨ã™è¡¨ç¾</p>
              <p>â€¢ ã€Œä»®ã«ï½ã™ã‚‹ã¨ã—ãŸã‚‰ã€= If S were to ~</p>
            </div>
          </div>
          <div id="q2-4" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: were[was] to</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: If S were to ~</div>
              <p>æœªæ¥ã«ã¤ã„ã¦ç´”ç²‹ãªä»®å®šã‚’è¡¨ã—ã¾ã™ã€‚</p>
            </div>
          </div>
        </div>

        <div class="question-block" data-question="q2-5">
          <div class="question-number">å•é¡Œ (5)</div>
          <div class="question-text">
            ã‚‚ã—ä»Šæœååˆ†ãªæœé£Ÿã‚’ã¨ã£ã¦ã„ãŸã‚‰ã€ä»ŠãŠè…¹ãŒã™ã„ã¦ã„ãªã„ã®ã«ã€‚<br>
            If I (<span class="fill-blank">ã€€ã€€ã€€</span>) (<span class="fill-blank">ã€€ã€€ã€€</span>) a good breakfast this morning, I wouldn't be hungry now.
          </div>
          <div class="button-group">
            <button class="hint-button" data-action="hint" data-target="hint-q2-5">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹</button>
            <button class="answer-button" data-action="answer" data-target="q2-5">âœ“ è§£ç­”ã‚’è¡¨ç¤º</button>
          </div>
          <div id="hint-q2-5" class="hint-box">
            <div class="hint-title">ğŸ’¡ è€ƒãˆæ–¹ã®ãƒ’ãƒ³ãƒˆ</div>
            <div class="hint-content">
              <p>â€¢ ifç¯€: this morning (éå»)</p>
              <p>â€¢ ä¸»ç¯€: now (ç¾åœ¨)</p>
              <p>â€¢ æ··åˆå‹</p>
            </div>
          </div>
          <div id="q2-5" class="explanation">
            <div class="correct-answer"><span class="correct-mark">âœ“</span>æ­£è§£: had had[eaten]</div>
            <div class="grammar-point">
              <div class="grammar-title">ğŸ“– æ–‡æ³•ãƒã‚¤ãƒ³ãƒˆ: ä»®å®šæ³•ã®æ··åˆå‹</div>
              <p>éå»ã®ä»®å®š â†’ éå»å®Œäº† / ç¾åœ¨ã®çµæœ â†’ would + åŸå½¢</p>
            </div>
          </div>
        </div>
      </section>

      <!-- The rest of your sections (Part3~ ç™ºå±•å•é¡Œ etc) go here.
           Iâ€™m leaving them exactly as you pasted â€” 
           just make sure every hint/answer button looks like:
             data-action="hint" data-target="hint-xxx"
             data-action="answer" data-target="xxx"
           If you want me to auto-rewrite the remaining blocks too,
           paste the rest and Iâ€™ll do it clean.
      -->

    </main>
  </div>

  <!-- Floating mini-nav -->
  <div class="mini-nav" aria-label="floating navigation">
    <button class="nav-btn ghost" id="goPrev">â† Prev</button>
    <button class="nav-btn" id="goTop">â†‘ Top</button>
    <button class="nav-btn ghost" id="goNext">Next â†’</button>
  </div>

  <script>
    (function(){
      const root = document.getElementById("contentRoot");
      const blocks = Array.from(document.querySelectorAll(".question-block"));
      const totalQuestions = blocks.length;
      const answered = new Set();

      const progressText = document.getElementById("progressText");
      const progressFill = document.getElementById("progressFill");

      function updateProgress(){
        const done = answered.size;
        const pct = totalQuestions ? (done/totalQuestions)*100 : 0;
        progressFill.style.width = pct.toFixed(1) + "%";
        progressText.textContent = `é€²æ—: ${done} / ${totalQuestions}`;
      }
      updateProgress();

      // Event delegation for hint/answer buttons
      root.addEventListener("click", (e)=>{
        const btn = e.target.closest("button[data-action]");
        if(!btn) return;
        const action = btn.dataset.action;
        const targetId = btn.dataset.target;
        const target = document.getElementById(targetId);
        if(!target) return;

        if(action === "hint"){
          target.classList.toggle("show");
        }
        if(action === "answer"){
          target.classList.toggle("show");
          const block = btn.closest(".question-block");
          if(target.classList.contains("show")){
            block?.classList.add("answered");
            answered.add(targetId);
          }
          updateProgress();
        }
      });

      // Toggle all hints / answers
      const toggleAllHints = document.getElementById("toggleAllHints");
      const toggleAllAnswers = document.getElementById("toggleAllAnswers");

      toggleAllHints.addEventListener("click", ()=>{
        const hints = document.querySelectorAll(".hint-box");
        const anyClosed = Array.from(hints).some(h=>!h.classList.contains("show"));
        hints.forEach(h=>h.classList.toggle("show", anyClosed));
      });

      toggleAllAnswers.addEventListener("click", ()=>{
        const answers = document.querySelectorAll(".explanation");
        const anyClosed = Array.from(answers).some(a=>!a.classList.contains("show"));
        answers.forEach(a=>{
          a.classList.toggle("show", anyClosed);
          if(anyClosed){
            const block = a.closest(".question-block");
            block?.classList.add("answered");
            answered.add(a.id);
          }
        });
        updateProgress();
      });

      // Dark mode
      const darkToggle = document.getElementById("darkToggle");
      const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      if(prefersDark) document.body.classList.add("dark-mode");
      darkToggle.textContent = document.body.classList.contains("dark-mode") ? "â˜€ï¸" : "ğŸŒ™";

      darkToggle.addEventListener("click", ()=>{
        document.body.classList.toggle("dark-mode");
        darkToggle.textContent = document.body.classList.contains("dark-mode") ? "â˜€ï¸" : "ğŸŒ™";
      });

      // Search / filter
      const searchInput = document.getElementById("searchInput");
      searchInput.addEventListener("input", ()=>{
        const q = searchInput.value.trim().toLowerCase();
        blocks.forEach(b=>{
          const text = b.innerText.toLowerCase();
          b.style.display = text.includes(q) ? "" : "none";
        });
      });

      // Floating nav (prev/next visible blocks)
      let currentIndex = 0;
      function visibleBlocks(){
        return blocks.filter(b => b.style.display !== "none");
      }
      function scrollToBlock(i){
        const vs = visibleBlocks();
        if(!vs.length) return;
        currentIndex = Math.max(0, Math.min(i, vs.length-1));
        vs[currentIndex].scrollIntoView({behavior:"smooth", block:"start"});
      }
      document.getElementById("goPrev").addEventListener("click", ()=>scrollToBlock(currentIndex-1));
      document.getElementById("goNext").addEventListener("click", ()=>scrollToBlock(currentIndex+1));
      document.getElementById("goTop").addEventListener("click", ()=>{
        document.getElementById("top").scrollIntoView({behavior:"smooth"});
      });

      // Download button (in-page rule)
      document.getElementById("downloadBtn").addEventListener("click", ()=>{
        const html = "<!DOCTYPE html>\n" + document.documentElement.outerHTML;
        const blob = new Blob([html], {type:"text/html"});
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "grammar_breakdown_lesson12_subjunctive_UXplus.html";
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
      });

    })();
  </script>
</body>
</html>
